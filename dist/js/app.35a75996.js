(function(t){function e(e){for(var n,r,i=e[0],l=e[1],c=e[2],d=0,p=[];d<i.length;d++)r=i[d],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&p.push(o[r][0]),o[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(p.length)p.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,i=1;i<a.length;i++){var l=a[i];0!==o[l]&&(n=!1)}n&&(s.splice(e--,1),t=r(r.s=a[0]))}return t}var n={},o={app:0},s=[];function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=n,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"10e1":function(t,e,a){},"3f60":function(t,e,a){"use strict";a("10e1")},5490:function(t,e,a){"use strict";a("a6b6")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav",{staticClass:"navbar",attrs:{role:"navigation","aria-label":"main navigation"}},[t._m(0),a("div",{staticClass:"navbar-menu",attrs:{id:"navbarBasicExample"}},[a("div",{staticClass:"navbar-start"},[a("router-link",{staticClass:"navbar-item",attrs:{to:"/"}},[t._v("World Map")]),a("router-link",{staticClass:"navbar-item",attrs:{to:"/Ville"}},[t._v("Ville")]),a("router-link",{staticClass:"navbar-item",attrs:{to:"/Dashboard"}},[t._v("Dashboard")])],1)])]),a("router-view",{attrs:{idUser:t.idUser}})],1)},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navbar-brand"},[n("a",{staticClass:"navbar-item"},[n("img",{attrs:{src:a("7be2"),width:"28",height:"30"}})])])}],r=(a("e9c4"),a("d3b7"),a("caad"),a("2532"),{name:"App",data:function(){return{idUser:[],uniqueId:[]}},created:function(){var t=this;setTimeout((function(){t.getID()}),1e3)},methods:{getID:function(){var t=this,e=JSON.stringify({collection:"Data",database:"DataMonitoring",dataSource:"Cluster0",projection:{status:1,info:1}});fetch("http://localhost:8080/app/data-grsmg/endpoint/data/beta/action/find",{method:"POST",body:e,headers:{"Content-Type":"application/json","Access-Control-Request-Headers":"*","Access-Control-Allow-Origin":"*","api-key":"pP3dYqzJQwzxhlj24CfIKPTHAy8LcAf4W2YdpRXbvmEXhh8LHLNOGSAabuO5QS7k"}}).then((function(t){return t.json()})).then((function(e){console.log("json legth : ",e.documents.length);for(var a=0;a<e.documents.length;a++)t.idUser.includes(e.documents[a].info.user)||t.idUser.push(e.documents[a].info.user);console.log("idusers : "+t.idUser)}))}}}),i=r,l=a("2877"),c=Object(l["a"])(i,o,s,!1,null,null,null),u=c.exports,d=a("289d"),p=(a("5abe"),a("8c4f")),f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("div",{staticClass:"position"},[a("b-field",{staticClass:"search-box",attrs:{label:"Selectionner une ville"}},[a("b-input",{model:{value:t.nom,callback:function(e){t.nom=e},expression:"nom"}})],1),a("b-button",{on:{click:t.Datafetch}},[t._v("lancer la recherche")])],1),t.notEmpty?a("div",[a("div",{staticClass:"location-box"},[a("div",{staticClass:"location"},[t._v(" "+t._s(t.temps.name)+", "+t._s(t.temps.sys.country||null)+" ")]),a("div",{staticClass:"weather-box"},[a("div",{staticClass:"temp"},[t._v(t._s(Math.round(t.temps.main.temp))+" C°")]),a("div",{staticClass:"weather"},[t._v(t._s(t.temps.weather[0].main))])])])]):t._e()])},h=[],m=(a("4de4"),a("25f0"),a("99af"),{data:function(){return{nom:"",key:"9c0f6b0bd3e3abbcc0c9ad3bdee77677",url:"http://api.openweathermap.org/data/2.5/",temps:{},notEmpty:!1}},computed:{filteredDataArray:function(){var t=this;return this.data.filter((function(e){return e.toString().toLowerCase().indexOf(t.nom.toLowerCase())>=0}))}},methods:{Datafetch:function(){fetch("".concat(this.url,"weather?q=").concat(this.nom,"&units=metric&APPID=").concat(this.key)).then((function(t){return t.json()})).then(this.tempsResultat)},tempsResultat:function(t){this.temps=t,this.notEmpty=!0}}}),b=m,g=(a("3f60"),Object(l["a"])(b,f,h,!1,null,"a2f838d4",null)),v=g.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("l-map",{ref:"map",staticClass:"map",attrs:{center:t.center,zoom:t.zoom},on:{"update:zoom":t.zoomUpdated,"update:center":t.centerUpdated}},[a("b-button",{staticClass:"position",attrs:{type:"is-primary","icon-left":"refresh"},on:{click:function(e){return t.getPoints()}}},[t._v(" Actualiser")]),a("l-tile-layer",{attrs:{url:t.url}}),t._l(t.points,(function(t){return a("point",{key:t.id,attrs:{point:t}})}))],2)},_=[],C=(a("d81d"),a("3ca3"),a("ddb0"),a("2699")),S=a("a40a"),w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("l-marker",{key:t.point.id,attrs:{"lat-lng":t.point.coordinates}},[a("l-icon",{ref:"icon"},[a("img",{staticClass:"ESP-icon",attrs:{src:t.point.imageUrl}})]),a("l-popup",[a("pre",[t._v("GPS : lat "+t._s(t.point.coordinates[0])+" lgn "+t._s(t.point.coordinates[1])+"\n      \nlocalisation :  "+t._s(t.point.loc)+" \n      \nutilisateur :  "+t._s(t.point.user)+" \n      \ntemperature : "+t._s(t.point.temperature)+"\n      \nLumens: "+t._s(t.point.lumens)+"\n      ")])])],1)},O=[],P=a("fbba"),D=a("4e2b"),j=a("f60f"),k={components:{LIcon:P["a"],LMarker:D["a"],LPopup:j["a"]},props:{point:{type:Object,required:!0},LPopup:j["a"]}},A=k,x=(a("c078"),Object(l["a"])(A,w,O,!1,null,null,null)),L=x.exports,U=(a("6cc5"),{components:{LMap:C["a"],LTileLayer:S["a"],point:L},props:{idUser:Array},data:function(){return{key:"9c0f6b0bd3e3abbcc0c9ad3bdee77677",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",center:[49.1193089,6.1757156],zoom:5,points:[],pointsinit:[],init:!1}},created:function(){var t=this,e=this.idUser.map((function(e){return t.getUserEsp(e)}));Promise.all(e),console.log("iduser  map : ",this.idUser)},methods:{zoomUpdated:function(t){this.zoom=t},centerUpdated:function(t){this.center=t},getPoints:function(){var t=this;this.points=[];var e=this.idUser.map((function(e){return t.getUserEsp(e)}));Promise.all(e)},getUserEsp:function(t){var e=this;console.log(" init ? : "+this.init);var a=JSON.stringify({collection:"Data",database:"DataMonitoring",dataSource:"Cluster0",filter:{"info.user":t},projection:{status:1,info:1}});fetch("http://localhost:8080/app/data-grsmg/endpoint/data/beta/action/findOne",{method:"POST",body:a,headers:{"Content-Type":"application/json","Access-Control-Request-Headers":"*","Access-Control-Allow-Origin":"*","api-key":"pP3dYqzJQwzxhlj24CfIKPTHAy8LcAf4W2YdpRXbvmEXhh8LHLNOGSAabuO5QS7k"}}).then((function(t){return t.json()})).then((function(t){console.log(t),console.log("firt init !");var a={id:t.document.info.user,imageUrl:"https://cdn-icons-png.flaticon.com/512/2540/2540201.png",coordinates:[parseFloat(t.document.status.lat),parseFloat(t.document.status.lgn)],temperature:t.document.status.temperature,lumens:t.document.status.light,loc:t.document.info.loc,user:t.document.info.user};e.points.push(a),console.log("points : "+JSON.stringify(a))}))}}}),E=U,I=(a("5490"),Object(l["a"])(E,y,_,!1,null,null,null)),T=I.exports,z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("b-table",{attrs:{data:t.data,paginated:t.isPaginated,"per-page":t.perPage,"current-page":t.currentPage,"pagination-simple":t.isPaginationSimple,"pagination-position":t.paginationPosition,"default-sort-direction":t.defaultSortDirection,"pagination-rounded":t.isPaginationRounded,"sort-icon":t.sortIcon,"sort-icon-size":t.sortIconSize,"default-sort":"user.first_name","aria-next-label":"Next page","aria-previous-label":"Previous page","aria-page-label":"Page","aria-current-label":"Current page","page-input":t.hasInput,"pagination-order":t.paginationOrder,"page-input-position":t.inputPosition,"debounce-page-input":t.inputDebounce,selected:t.selected,focusable:""},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:selected":function(e){t.selected=e}}},[a("b-table-column",{attrs:{field:"id",label:"ID",width:"40",sortable:"",numeric:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.id)+" ")]}}])}),a("b-table-column",{attrs:{field:"id",label:"Localisation",width:"40",sortable:"",numeric:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.loc)+" ")]}}])}),a("b-table-column",{attrs:{field:"id",label:"Utilisateur",width:"40",sortable:"",numeric:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.user)+" ")]}}])}),a("b-table-column",{attrs:{field:"id",label:"Dernière mise a jour",width:"40",sortable:"",numeric:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.time)+" ")]}}])}),a("b-table-column",{attrs:{field:"id",label:"Status Coller",width:"40",sortable:"",numeric:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.CoolerStatus)+" ")]}}])}),a("b-table-column",{attrs:{field:"id",label:"Status Heater",width:"40",sortable:"",numeric:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.HeaterStatus)+" ")]}}])}),a("b-table-column",{attrs:{field:"id",label:"Latitude",width:"40",sortable:"",numeric:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.lat)+" ")]}}])}),a("b-table-column",{attrs:{field:"id",label:"Longitude",width:"40",sortable:"",numeric:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.lgn)+" ")]}}])})],1),t.selected?a("div",[a("Chart",{key:t.selected,attrs:{user:t.selected}})],1):t._e()],1)},H=[],M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[t.isFinish?a("div",[a("LineChartGenerator",{attrs:{"chart-options":t.chartOptions,"chart-data":t.chartData,"chart-id":t.chartId,"dataset-id-key":t.datasetIdKey,plugins:t.plugins,"css-classes":t.cssClasses,styles:t.styles,width:t.width,height:t.height}})],1):t._e()])},N=[],R=(a("a9e3"),a("fb6a"),a("7b97")),J=a("9b4a");J["d"].register(J["o"],J["p"],J["f"],J["h"],J["i"],J["c"],J["k"]);var q={name:"LineChart",components:{LineChartGenerator:R["a"]},props:{user:Object,chartId:{type:String,default:"line-chart"},datasetIdKey:{type:String,default:"label"},width:{type:Number,default:200},height:{type:Number,default:400},cssClasses:{default:"",type:String},styles:{type:Object,default:function(){}},plugins:{type:Array,default:function(){return[]}}},data:function(){return{isFinish:!1,chartData:{labels:[],datasets:[{label:"Temperatures",backgroundColor:"#f87979",data:[]},{label:"Lumens",backgroundColor:"#000000",data:[]}]},chartOptions:{responsive:!0,maintainAspectRatio:!1}}},created:function(){this.getDataFromUser(this.user.user),console.log("user chart :",this.user)},methods:{getDataFromUser:function(t){var e=this;console.log(" user ? : "+t);var a=t.toString();console.log("selectUser : "+a);var n=JSON.stringify({collection:"Data",database:"DataMonitoring",dataSource:"Cluster0",filter:{"info.user":t},projection:{status:1,info:1}});fetch("http://localhost:8080/app/data-grsmg/endpoint/data/beta/action/find",{method:"POST",body:n,headers:{"Content-Type":"application/json","Access-Control-Request-Headers":"*","Access-Control-Allow-Origin":"*","api-key":"pP3dYqzJQwzxhlj24CfIKPTHAy8LcAf4W2YdpRXbvmEXhh8LHLNOGSAabuO5QS7k"}}).then((function(t){return t.json()})).then((function(t){console.log("userselect  :",t);for(var a=0;a<t.documents.length;a++)e.chartData.labels.push(t.documents[a].info.time),e.chartData.datasets[0].data.push(parseFloat(t.documents[a].status.temperature)),e.chartData.datasets[1].data.push(parseInt(t.documents[a].status.light));var n=e.chartData.datasets[1].data.length-10;n<=0&&(n=0),e.chartData.datasets[1].data=e.chartData.datasets[1].data.slice(n,e.chartData.datasets[1].data.length),n=e.chartData.datasets[0].data.length-10,n<=0&&(n=0),e.chartData.datasets[0].data=e.chartData.datasets[0].data.slice(n,e.chartData.datasets[0].data.length),n=e.chartData.labels.length-10,n<=0&&(n=0),e.chartData.labels=e.chartData.labels.slice(n,e.chartData.labels.length),console.log("labels :",e.chartData.labels),console.log("dataset data :",e.chartData.datasets[0].data),e.isFinish=!0}))}}},F=q,G=Object(l["a"])(F,M,N,!1,null,null,null),Q=G.exports,X={props:{idUser:Array},data:function(){var t=[];return{data:t,selected:t[1],isPaginated:!0,isPaginationSimple:!1,isPaginationRounded:!1,paginationPosition:"bottom",defaultSortDirection:"asc",sortIcon:"arrow-up",sortIconSize:"is-small",currentPage:1,perPage:5,hasInput:!1,paginationOrder:"",inputPosition:"",inputDebounce:""}},components:{Chart:Q},created:function(){var t=this,e=this.idUser.map((function(e){return t.getUserEsp(e)}));Promise.all(e),this.getUserEsp()},methods:{setUser:function(t){console.log("user utiliser : "+t)},dateThAttrs:function(t){return"Date"===t.label?{title:'This title is sponsored by "th-attrs" prop',class:"has-text-success"}:null},columnTdAttrs:function(t,e){return"Total"===t.id?"ID"===e.label?{colspan:4,class:"has-text-weight-bold",style:{"text-align":"left !important"}}:"Gender"===e.label?{class:"has-text-weight-semibold"}:{style:{display:"none"}}:null},getUserEsp:function(t){var e=this;console.log(" init ? : "+this.init);var a=JSON.stringify({collection:"Data",database:"DataMonitoring",dataSource:"Cluster0",filter:{"info.user":t},projection:{status:1,info:1}});fetch("http://localhost:8080/app/data-grsmg/endpoint/data/beta/action/findOne",{method:"POST",body:a,headers:{"Content-Type":"application/json","Access-Control-Request-Headers":"*","Access-Control-Allow-Origin":"*","api-key":"pP3dYqzJQwzxhlj24CfIKPTHAy8LcAf4W2YdpRXbvmEXhh8LHLNOGSAabuO5QS7k"}}).then((function(t){return t.json()})).then((function(t){console.log(t),console.log("firt init !");var a={id:t.document._id,loc:t.document.info.loc,user:t.document.info.user,time:t.document.info.time,CoolerStatus:t.document.status.ledCooler,HeaterStatus:t.document.status.ledHeater,lat:t.document.status.lat,lgn:t.document.status.lgn};e.data.push(a),console.log("points : "+JSON.stringify(a))}))}}},Y=X,$=(a("b28c"),Object(l["a"])(Y,z,H,!1,null,"64148822",null)),K=$.exports;n["a"].use(p["a"]);var W=[{path:"/",name:"Map",component:T},{path:"/Ville",name:"Ville",component:v},{path:"/Dashboard",name:"Dashboard",component:K}],V=new p["a"]({mode:"history",base:"/",routes:W}),B=V;n["a"].use(d["a"]),n["a"].config.productionTip=!1,new n["a"]({router:B,render:function(t){return t(u)}}).$mount("#app")},"7be2":function(t,e,a){t.exports=a.p+"img/globe.f806b91b.png"},a6b6:function(t,e,a){},b28c:function(t,e,a){"use strict";a("d3a8")},c078:function(t,e,a){"use strict";a("f342")},d3a8:function(t,e,a){},f342:function(t,e,a){}});
//# sourceMappingURL=app.35a75996.js.map